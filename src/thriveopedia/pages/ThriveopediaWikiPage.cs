using System.Collections.Generic;
using Godot;


/// <summary>
///   A page in the Thriveopedia generated by content from the online wiki.
/// </summary>
public abstract class ThriveopediaWikiPage : ThriveopediaPage
{
    /// <summary>
    ///   Link to this page in the online wiki.
    /// </summary>
    public abstract string Url { get; }

    public override void OnThriveopediaOpened()
    {
    }

    public override void UpdateCurrentWorldDetails()
    {
    }

    public static List<ThriveopediaWikiPage> GenerateAllWikiPages()
    {
        var pages = new List<ThriveopediaWikiPage>();

        var wiki = SimulationParameters.Instance.GetWiki();

        // TODO add "Wiki" and "Organelles" pages to list first, then set parent pages of all organelles

        foreach (var organellePage in wiki.Organelles)
        {
            var scene = GD.Load<PackedScene>("res://src/thriveopedia/pages/wiki/ThriveopediaOrganellePage.tscn");
            var page = (ThriveopediaOrganellePage)scene.Instance();
            page.WikiPage = organellePage;
            page.Organelle = SimulationParameters.Instance.GetOrganelleType(organellePage.InternalName);
            pages.Add(page);
        }

        return pages;
    }
}
